<template>
  <svg id="selectorMapContainer" :width="svgWidth" :height="svgHeight">
    <g>
      <path fill="grey" :d="countryPath" />
      <circle v-for="radar in radars" :key="radar.value" r="5px" :fill="getCircleFillColor(radar)" :cx="projectRadar(radar)[0]" :cy="projectRadar(radar)[1]" @click="$emit('click-circle', radar.value)">
        <title>{{ radar.text }}</title>
      </circle>
    </g>
  </svg>
</template>

<script lang="ts">
import Vue from "vue";
import * as d3 from "d3";
import axios from "axios";
import { GeoPermissibleObjects } from 'd3';
import { GroupedRadarInterface, RadarInterface } from '@/CrowTypes';

export default Vue.extend({
  name: "SiteSelectorMap",
  props: {
    sites: {
      type: Array as () => GroupedRadarInterface[],
      default: []
    },
    selectedRadarCode: {
      type: String,
      default: ''
    }
  },
  data: function () {
    return {
      svgWidth: 300,
      svgHeight: 200,

      projectionScale: 3300,
      projectionCenter: {
        lon: 4.67,
        lat: 50.63
      },

      Countryfeature: { "type": "Feature", "properties": { "ADMIN": "Belgium", "ISO_A3": "BEL", "ISO_A2": "BE" }, "geometry": { "type": "MultiPolygon", "coordinates": [[[[4.815447224000138, 51.431073711000025], [4.822681925000012, 51.413684591], [4.779067016000056, 51.426422832000142], [4.767801554000101, 51.425389303000159], [4.762117146000151, 51.413374532000105], [4.783304484000013, 51.407638448000156], [4.853274373000119, 51.406139832000136], [4.871671183000046, 51.403039246], [4.910325154000134, 51.391902975000093], [4.931925903000092, 51.395623678], [4.957144002000064, 51.410997416000086], [4.980191691000101, 51.430531108000181], [4.995797973000066, 51.446705831000159], [5.002722616000142, 51.459004822000011], [5.00613326000007, 51.468306580000146], [5.012127727000092, 51.474326884000092], [5.027527303000085, 51.476807353000069], [5.030317831000048, 51.474430237000107], [5.060290161000069, 51.461976217000128], [5.079927205000104, 51.438540955000136], [5.076413208000048, 51.421901144000131], [5.065251099000108, 51.405907288], [5.061737101000063, 51.384254863000095], [5.068144979000095, 51.374539694000148], [5.102561483000073, 51.350665182000071], [5.107832479000081, 51.341983541000118], [5.118064412000081, 51.319917705000123], [5.122921997000105, 51.313380636000048], [5.140181926000082, 51.307386170000129], [5.178835897000084, 51.309504903000104], [5.197336059000122, 51.30834218299999], [5.214906047000085, 51.294337870000064], [5.215422811000025, 51.258732808], [5.232992798000112, 51.255916443000118], [5.239455934000091, 51.256930182000175], [5.270716593000145, 51.261833395000124], [5.389055623000104, 51.258706971], [5.409932901000076, 51.263538717000117], [5.451894165000084, 51.282116394000141], [5.471634562000133, 51.288085023000079], [5.49323531100012, 51.286534729000053], [5.516696411000083, 51.277232972000135], [5.535196573000121, 51.262040100000021], [5.542327921000066, 51.242661439000031], [5.54553186000004, 51.219923808000047], [5.551406597000096, 51.216767134000079], [5.568372843000134, 51.207650655000023], [5.62501021300011, 51.196901957000094], [5.638549438000098, 51.190907491000175], [5.648161255000105, 51.183957011000174], [5.659013306000048, 51.179073588000151], [5.676169881000106, 51.179176940999987], [5.718027791000083, 51.18460296700006], [5.730843547000063, 51.183750306000135], [5.74717329900011, 51.177600810000158], [5.768050577000082, 51.159462383000047], [5.781383098000106, 51.1524085490001], [5.812078898000038, 51.157317810000151], [5.829132121000072, 51.156465149000113], [5.838020467000092, 51.143726909000137], [5.840500936000069, 51.138921], [5.826444946000038, 51.130161845000075], [5.823241007000064, 51.118741354000164], [5.845978638000048, 51.103393454000084], [5.836780232000137, 51.099491883000141], [5.826651652000095, 51.096908061000036], [5.81590295400008, 51.095874532000053], [5.804947550000094, 51.096623840000134], [5.807428019000071, 51.08938914], [5.808978312000107, 51.086340230000147], [5.81176884000007, 51.082309469000066], [5.804327434000129, 51.068589376000133], [5.798849731000132, 51.061483866000017], [5.791304972000091, 51.054998475000147], [5.779626098000023, 51.061302999000148], [5.771461222000113, 51.058124899000106], [5.766396932000134, 51.048435568000158], [5.764019816000086, 51.035180563000054], [5.777559041000075, 51.023553366], [5.761746053000081, 50.999162090000155], [5.722368612000082, 50.959422913000154], [5.744692830000133, 50.963246969000025], [5.75430464700014, 50.963091940000155], [5.764019816000086, 50.959422913000154], [5.752547648000075, 50.94722727500006], [5.73528771900007, 50.923972881000125], [5.722368612000082, 50.911673890000102], [5.717614380000072, 50.909245097000124], [5.706038859000046, 50.906609599000134], [5.694463338000077, 50.903664042000045], [5.622323039000094, 50.852659404000164], [5.624493448000067, 50.830283509000182], [5.640719849000078, 50.815038961000042], [5.657432381000092, 50.807640982000166], [5.663250773000101, 50.805065410000125], [5.68485152100007, 50.798502503000137], [5.700457804000109, 50.795556946000048], [5.698700806000119, 50.783774720000153], [5.688365519000115, 50.760830384000101], [5.706555623000071, 50.75421580000004], [5.717407674000128, 50.752820537000147], [5.727846313000072, 50.754164124000013], [5.732776968000081, 50.758851489000065], [5.74355594900004, 50.769098613000054], [5.752444296000135, 50.773439433000036], [5.762469523000078, 50.77101064099999], [5.782933390000039, 50.756696270000091], [5.793165324000114, 50.752148743000149], [5.879878377000068, 50.753544006000041], [5.891287548000122, 50.751246327], [5.89132117000014, 50.751239556000158], [5.902202596000024, 50.749048157000018], [5.974756307000064, 50.747549540000094], [5.994910116000114, 50.749926656000142], [5.993256469000073, 50.748066305000137], [5.992636353000108, 50.746257630000159], [5.992739705000133, 50.744448955000067], [5.994186645000127, 50.742588603000158], [6.010826457000064, 50.737059225000152], [6.011343221000089, 50.727447408000145], [6.00762251800009, 50.716905417000177], [6.011549926000043, 50.708533835000097], [6.02477909300012, 50.70755198200014], [6.064363240000091, 50.714476624000113], [6.081003052000114, 50.713494772000061], [6.100226685000052, 50.701299134000138], [6.161101521000092, 50.642181296000089], [6.147769002000047, 50.636755270000108], [6.159447876000115, 50.622389222000024], [6.180015096000119, 50.615516256000134], [6.249054809000086, 50.614431051000125], [6.251328572000091, 50.608436585], [6.244300577000075, 50.5995482390001], [6.232931763000096, 50.590763245000019], [6.232931763000096, 50.587145894000045], [6.210607543000037, 50.578670959000121], [6.17908492000015, 50.56197947200009], [6.160688110000081, 50.543582663000095], [6.177327922000075, 50.530198466000158], [6.169473103000144, 50.522498678000076], [6.170816691000113, 50.517951152000123], [6.178878214000093, 50.515780742000132], [6.190557088000077, 50.515212301000176], [6.182598917000121, 50.506582337000125], [6.190660441000119, 50.501828105000143], [6.199238729000058, 50.49040761300013], [6.207196900000099, 50.486325175000118], [6.217118774000085, 50.486015117000065], [6.25091516100008, 50.492681376000164], [6.253085571000071, 50.494076640000131], [6.255566040000133, 50.494593404000071], [6.257839803000053, 50.494076640000131], [6.260113566000086, 50.492681376000164], [6.27540979000014, 50.488030497000082], [6.31871464000011, 50.481674296000065], [6.336904744000037, 50.48100250200018], [6.325742635000097, 50.474026184000181], [6.32326216600012, 50.466016337000113], [6.326156046000108, 50.457024638000163], [6.331633748000115, 50.446896057000018], [6.340212036000139, 50.437852682000155], [6.347343384000084, 50.436974183000032], [6.35116744000004, 50.433563538], [6.350443969000111, 50.416872051000055], [6.343312622000099, 50.39330759700006], [6.336387980000097, 50.379923402000131], [6.337731567000077, 50.368089498000117], [6.372458130000098, 50.329435527], [6.373399684000106, 50.323080035000046], [6.374525187000074, 50.31548289100003], [6.36201949000008, 50.30695627900009], [6.335457804000043, 50.303855692000141], [6.322021932000098, 50.305405986000082], [6.310653116000111, 50.308248190000043], [6.299491007000086, 50.308868307000026], [6.285951782000097, 50.303855692000141], [6.276029907000094, 50.296104228000146], [6.269415324000107, 50.286492412000044], [6.267348267000045, 50.276415507000095], [6.271792439000137, 50.267423808000061], [6.253395630000057, 50.25677846300006], [6.210400838000084, 50.249026998000048], [6.189626912000023, 50.242722473000057], [6.179808390000062, 50.233007304000111], [6.15717411300011, 50.222723694000095], [6.146838827000096, 50.214042054000132], [6.160171346000112, 50.204533590000054], [6.165752400000145, 50.19316477500017], [6.165132284000066, 50.181899312000112], [6.159137817000044, 50.172442526000125], [6.151696411000017, 50.169341939], [6.13174930800011, 50.168308411000041], [6.123171020000086, 50.164897767000085], [6.121310668000149, 50.161590475000096], [6.11800337700015, 50.150376689000055], [6.115832967000074, 50.145467428000117], [6.125961547000117, 50.140196432], [6.129475545000076, 50.134046937], [6.126581665000089, 50.127329000000188], [6.11748661300004, 50.120456035000032], [6.102603800000082, 50.124745179000072], [6.100330037000077, 50.132651673000126], [6.101466919000075, 50.142108460000102], [6.097126098000103, 50.151306865000024], [6.084206991000087, 50.159316712000177], [6.076455525000085, 50.158644918], [6.070047648000127, 50.154200745000182], [6.061366008000078, 50.150738424000153], [6.038628377000094, 50.148412985000036], [6.02736291500014, 50.149446513], [6.022966606000097, 50.150820360000083], [6.014133749000052, 50.153580628000114], [6.008035929000101, 50.160918681000012], [6.004728638000103, 50.170478821000117], [5.998320760000041, 50.174974671000044], [5.982921183000144, 50.16706817699999], [5.961630493000087, 50.165621236], [5.953155558000077, 50.156371155000087], [5.949021444000067, 50.142676900000154], [5.941063273000083, 50.12831085200007], [5.926180461000058, 50.118337301000125], [5.888973429000117, 50.106606751000143], [5.872436971000127, 50.096891581000122], [5.868819621000057, 50.090535381000095], [5.866855916000134, 50.074308981000073], [5.864375447000043, 50.067487691000125], [5.858277628000081, 50.061803284000078], [5.843704874000139, 50.053638408000054], [5.837710408000106, 50.047437236000079], [5.838847290000103, 50.035861715000053], [5.838847290000103, 50.026456603999989], [5.836366821000127, 50.018550110000135], [5.829132121000072, 50.013589173000085], [5.808874959000065, 50.007801412], [5.802673787000089, 50.002478740000143], [5.801536906000081, 49.988681133000014], [5.808564901000096, 49.983100078000106], [5.812595662000092, 49.977570700000101], [5.801640258000106, 49.963824768000066], [5.793372029000068, 49.958812155000103], [5.778592570000058, 49.95659006699999], [5.771564575000127, 49.953541158000164], [5.7637097570001, 49.946823222000049], [5.759989054000101, 49.941603902000125], [5.757611939000128, 49.936539612000146], [5.75358117600004, 49.930183411000129], [5.718957967000051, 49.891374410000154], [5.714927205000038, 49.881865946000104], [5.726709432000064, 49.87819692], [5.748826945000047, 49.867293193000037], [5.758128702000079, 49.858198141000159], [5.731877075000057, 49.859955139000036], [5.731980428000071, 49.854167380000078], [5.730533488000077, 49.851170146000143], [5.728673136000083, 49.848844707000026], [5.726916137000103, 49.845227357000127], [5.73652795400011, 49.839439596000076], [5.724642374000098, 49.834271953000055], [5.720198202000091, 49.82471181300015], [5.721645142000085, 49.812774557000026], [5.727742960000114, 49.800217184000118], [5.73828495300009, 49.788848368000018], [5.748413533000132, 49.785644430000147], [5.759162231000062, 49.784455872000038], [5.771874634000113, 49.779391582000144], [5.7784892170001, 49.773035380000024], [5.802053670000106, 49.742856344000032], [5.803603963000057, 49.738153789000037], [5.805774373000133, 49.724201152000049], [5.805360961000105, 49.721875713000131], [5.81176884000007, 49.718516745000031], [5.825721476000041, 49.715777894000055], [5.831715942000074, 49.71360748299999], [5.837296997000095, 49.71293569], [5.843704874000139, 49.714330954000062], [5.850216105000101, 49.714020894], [5.856003865000076, 49.708078105000155], [5.856402764000052, 49.705807450000137], [5.857347453000045, 49.7004299930001], [5.853626749000028, 49.696295878000072], [5.848769165000107, 49.692730205000103], [5.847218872000099, 49.687200827000098], [5.846702108000045, 49.680689596000136], [5.843704874000139, 49.677485657000076], [5.842257934000145, 49.67391998300009], [5.845771932000105, 49.666581930000106], [5.852593221000063, 49.663222962000091], [5.872643676000109, 49.661724345], [5.879878377000068, 49.657745260000084], [5.88545943200009, 49.643534241000125], [5.879878377000068, 49.63485260099999], [5.86995650200015, 49.628858135000044], [5.861998331000109, 49.622760316], [5.849182577000107, 49.599712626000112], [5.841224406000066, 49.589687398000095], [5.829958944000111, 49.582762756000037], [5.846908813000113, 49.576716614000176], [5.83740035000011, 49.561110332000126], [5.814456014000086, 49.545142314000103], [5.790684855000023, 49.537752585000092], [5.779005982000058, 49.539612936000097], [5.757095174000114, 49.548397928999989], [5.74634647600007, 49.549431458000171], [5.735597779000074, 49.545710755000144], [5.72267867000005, 49.534600322000031], [5.710276327000088, 49.531086325000089], [5.688675578000101, 49.53351511700005], [5.667178182000072, 49.540439759000108], [5.644647257000145, 49.543798727000038], [5.619739217000074, 49.535530497000096], [5.607853638000051, 49.524936829000026], [5.605579875000046, 49.517753805000055], [5.60227258300003, 49.513723043000155], [5.587493124000019, 49.512431133000021], [5.578914836000081, 49.513929749000042], [5.547598918000091, 49.523438212000102], [5.528788696000078, 49.517960511000027], [5.503673950000064, 49.505093079000019], [5.477732381000095, 49.495222881000032], [5.456131633000041, 49.498943584000145], [5.449930461000037, 49.507831930000165], [5.450963989000115, 49.516771952000099], [5.454167928000089, 49.526177063000048], [5.454374633000043, 49.536615703000095], [5.450240519000118, 49.545762431000171], [5.402078084000038, 49.602451477000088], [5.391165749000066, 49.608817006000081], [5.3834745690001, 49.613303528000031], [5.352468709000078, 49.620693258000031], [5.341099894000081, 49.625137432000045], [5.334898722000077, 49.625809225000026], [5.331178019000078, 49.623122050000077], [5.326940552000025, 49.617644349], [5.321669555000085, 49.61258005800012], [5.314538208000073, 49.611133118000126], [5.29789839700004, 49.613251852000118], [5.293040812000101, 49.617179261000089], [5.29066369700007, 49.626377666000067], [5.293764282000012, 49.640537008000123], [5.301825806000096, 49.643895976000053], [5.306373332000135, 49.647513327000027], [5.299448690000048, 49.662499492000094], [5.280121704000095, 49.67789906899999], [5.259244425000134, 49.691334941000108], [5.237643677000079, 49.690973206000038], [5.192478475000087, 49.68280832900011], [5.169430786000135, 49.687200827000098], [5.151240682000093, 49.69598582], [5.13635787000004, 49.705339254000037], [5.093776489000078, 49.745336812000104], [5.081890909000038, 49.752726543], [5.046234172000141, 49.759392802000107], [5.026287068000045, 49.766730856000109], [4.989080037000122, 49.790553691000085], [4.970993286000123, 49.797064922000132], [4.968370957000019, 49.796980956000041], [4.950012654000119, 49.796393128000076], [4.906604451000106, 49.786471252000169], [4.884176879000023, 49.784145813000137], [4.858028605000129, 49.786574605000013], [4.849036906000066, 49.794171041000155], [4.849243611000134, 49.831584778000135], [4.846763142000071, 49.837527568000056], [4.836944620000082, 49.8480178840001], [4.834877564000124, 49.853030498000138], [4.836737915000128, 49.859128317000014], [4.845626261000064, 49.865846253000043], [4.848933553000052, 49.871065572000148], [4.854307902000102, 49.883312887], [4.85937219200008, 49.891684469000054], [4.8619560140001, 49.90031443300002], [4.860199016000109, 49.913336894000125], [4.84459273300007, 49.931733704000138], [4.797257120000097, 49.944291077000159], [4.783924601000081, 49.95829539000006], [4.78826542200008, 49.974263408000084], [4.826712687000111, 50.036016744000065], [4.827642863000079, 50.046713766], [4.826092570000128, 50.05503367200005], [4.827229451000051, 50.064077047000112], [4.846039673000064, 50.090690410000136], [4.852137492000111, 50.09162058599999], [4.86288619000004, 50.08407582700012], [4.865159953000074, 50.101594137000106], [4.870534302000124, 50.122264710000096], [4.871877889000075, 50.139783020000081], [4.862679484000097, 50.147586162], [4.831363566000078, 50.143400371000055], [4.820098103000106, 50.146449280000084], [4.815550578000085, 50.161332092000023], [4.788575480000134, 50.153373922000142], [4.681915324000073, 50.08392079700009], [4.676127563000108, 50.076065980000138], [4.673440389000064, 50.06619578099999], [4.675817505000111, 50.060201315000043], [4.67953820800011, 50.055188700000187], [4.680571737000093, 50.048315735000031], [4.672923624000134, 50.016379700000059], [4.665895629000119, 50.000515035000134], [4.656697225000102, 49.989094544000025], [4.645845174000073, 49.984495342000073], [4.60419396900005, 49.980206198000118], [4.464770956000081, 49.935609436], [4.435108683000095, 49.932250468000078], [4.427651209000089, 49.933571674000163], [4.27759891700012, 49.960155742000055], [4.215952935000132, 49.954407670000094], [4.201117798000041, 49.953024394000025], [4.187681925000078, 49.955504863], [4.131664672000056, 49.974986878], [4.132364978000112, 49.974945951000095], [4.139622843000041, 49.974521790000082], [4.138382609000075, 49.989197897000153], [4.132904907000096, 50.004494121], [4.128150675000114, 50.005786031000142], [4.132284790000114, 50.017568258000054], [4.137349080000092, 50.025061341000097], [4.14458378100008, 50.030797425000159], [4.162877238000135, 50.041804505000144], [4.186028279000141, 50.052449849000041], [4.210006144000147, 50.060149638000141], [4.210316203000048, 50.066712545000101], [4.203391561000046, 50.074670716000085], [4.197397095000042, 50.08407582700012], [4.180550578000037, 50.12722564700006], [4.170628703000148, 50.130481262000146], [4.159880005000048, 50.129396058000154], [4.139932902000112, 50.123556620000059], [4.125773559000066, 50.128155823000114], [4.128150675000114, 50.14624257500013], [4.147374308000025, 50.186343486000041], [4.152748657000103, 50.204533590000054], [4.157296183000113, 50.212698466000077], [4.167941528000114, 50.222465312000125], [4.19150598100012, 50.234299215000149], [4.20132450300008, 50.241533916000108], [4.203701619000128, 50.251972554000147], [4.197603800000081, 50.258483785000024], [4.185201457000119, 50.265460104000013], [4.17176558500006, 50.27088612900009], [4.162773885000121, 50.272953187000056], [4.150268189000116, 50.269542542000025], [4.149751424000073, 50.263134665000095], [4.150991658000123, 50.256261698000017], [4.143653605000111, 50.251610820000153], [4.125256795000041, 50.257140198000158], [4.097868286000079, 50.294812317], [4.077197713000146, 50.306646220000019], [4.055907023000088, 50.314552715000062], [4.022730753000076, 50.338117167000163], [4.003300415000098, 50.344059957000169], [3.982113077000122, 50.342613017000176], [3.918551066000049, 50.325456441000128], [3.895916789000097, 50.32530141299999], [3.878036743000052, 50.330779114000066], [3.86088016800008, 50.338478902000148], [3.840209595000061, 50.345196839], [3.798661743000082, 50.348452454000082], [3.755046834000041, 50.346333721000107], [3.741507609000053, 50.34312978100003], [3.733446085000054, 50.337238668000126], [3.71546268700007, 50.317653300000089], [3.711121867000088, 50.309333395000138], [3.708434692000083, 50.306336162000107], [3.703887167000119, 50.304320780000083], [3.702233520000078, 50.305250956000023], [3.700786580000084, 50.30468251600017], [3.696859172000131, 50.298222962000025], [3.661719198000071, 50.319306946000054], [3.652934204000076, 50.360183004000149], [3.652830851000147, 50.406846822000134], [3.644355916000052, 50.445500793000136], [3.628129517000048, 50.464362692000165], [3.608285766000051, 50.476506653000158], [3.586374959000096, 50.483482971000157], [3.56374068100007, 50.48653188100009], [3.499145142000089, 50.48679026300006], [3.486742798000137, 50.492681376000164], [3.496457967000083, 50.503791810000067], [3.498008260000091, 50.511853332000058], [3.491497029000129, 50.517072652000181], [3.477130982000119, 50.519863180000144], [3.46286828600006, 50.519139710000147], [3.45263635200007, 50.514850566000078], [3.442714477000067, 50.508494365000061], [3.429175252000078, 50.501828105000143], [3.385353637000094, 50.49164784800017], [3.361065714000091, 50.489787497000165], [3.343599080000047, 50.492939759000038], [3.299880819000066, 50.507460836000078], [3.286755005000089, 50.514075420000083], [3.27104537000011, 50.526942851000072], [3.265877726000042, 50.538311666000155], [3.264327433000091, 50.570196025000129], [3.237869100000097, 50.62647166], [3.229807576000042, 50.655410462000177], [3.243760213000115, 50.672101950000112], [3.232391398000118, 50.695924785000088], [3.224433227000077, 50.705174866], [3.210997355000103, 50.707965394000055], [3.1969413650001, 50.709205628000078], [3.188983195000049, 50.715096742000085], [3.176684204000082, 50.734113668000148], [3.162822752000096, 50.749925121000032], [3.162810519000061, 50.749939075000114], [3.146195109000104, 50.768891907000111], [3.129245239000085, 50.779072165000073], [3.103303671000049, 50.784084778000036], [3.023816593000049, 50.768262116000031], [2.971425415000113, 50.75783315000011], [2.948377726000047, 50.748686422000119], [2.930187622000119, 50.736232402000141], [2.900111938000038, 50.703107809000031], [2.886882772000149, 50.69664825500017], [2.87127648900011, 50.698766989000049], [2.86672588400009, 50.700091003000082], [2.786733846000033, 50.723364970000134], [2.768233683000119, 50.733235169000025], [2.762962687000083, 50.739384665], [2.74952681500011, 50.759590149000175], [2.743842407000074, 50.766204732000077], [2.706635376000065, 50.78878733400002], [2.700020792000089, 50.79628041600013], [2.696920207000119, 50.803050028000186], [2.691855916000066, 50.808837789000066], [2.678730102000088, 50.813230286000149], [2.669221639000114, 50.81390207900013], [2.650618123000044, 50.812248434000182], [2.642453247000049, 50.812455139000136], [2.627777140000148, 50.814418844000087], [2.620439087000136, 50.816485902000139], [2.615168091000015, 50.822170309000072], [2.606589803000077, 50.834831034000118], [2.602042277000066, 50.838086649], [2.589949992000072, 50.842014059000078], [2.586746053000098, 50.845424704000024], [2.587779582000081, 50.850023906000146], [2.595531046000076, 50.86113433900006], [2.596667928000102, 50.867645569000146], [2.576927531000138, 50.911518860000157], [2.582715291000113, 50.920665589000137], [2.605762980000066, 50.935238343000108], [2.611654093000055, 50.941232809000141], [2.608450154000082, 50.961128235000146], [2.592740519000131, 50.9761144000001], [2.556980428000117, 51.00117747000003], [2.547058553000113, 51.020478618000155], [2.537033325000095, 51.064610291000136], [2.521799927690466, 51.087540883480429], [2.521820509000094, 51.087551174000069], [2.54200280000012, 51.096869208000115], [2.579925977000073, 51.104803778000175], [2.715668165000039, 51.169501044000114], [2.923594597000118, 51.246486721000096], [3.124847852000045, 51.329657294000057], [3.34896894600007, 51.375148830000015], [3.349414674022739, 51.375223117889803], [3.358068481000061, 51.336712546000101], [3.353934366000146, 51.311907858000055], [3.353210897000054, 51.288601787000019], [3.367370240000099, 51.263487040000186], [3.391658163000102, 51.246769715000042], [3.398798477000071, 51.24469829300007], [3.421940552000109, 51.237984721000075], [3.45387658700011, 51.235633444000129], [3.501212199000065, 51.240284323000182], [3.504106079000053, 51.249741110000159], [3.501522258000136, 51.262401836], [3.503382609000141, 51.273951518000118], [3.514338012000025, 51.281031189000075], [3.529014120000113, 51.283330791000182], [3.54503381300006, 51.283925069000063], [3.584824666000088, 51.289531963000073], [3.609526001000091, 51.290436300000025], [3.635054159000049, 51.28782664], [3.757320597000046, 51.262324321000065], [3.776234172000102, 51.254521180000054], [3.781401815000095, 51.241421204000105], [3.779748169000129, 51.230310771000077], [3.781401815000095, 51.219872132000049], [3.796284627000119, 51.208761698000117], [3.8086869710001, 51.205325216000077], [3.927026001000058, 51.206255392000131], [3.949453572000067, 51.21077708000017], [3.995032186000032, 51.233230489000064], [4.118952271000097, 51.272401225000024], [4.168561645000096, 51.296870016000142], [4.207939087000085, 51.330588888000122], [4.213520141000089, 51.340536601000125], [4.220961547000115, 51.363816834000048], [4.221491455026921, 51.368000603073099], [4.221527540000068, 51.367987372000172], [4.222178582000112, 51.367743231000034], [4.241058790000125, 51.356594143], [4.249034050000091, 51.346665757000025], [4.256114129000139, 51.328436591000028], [4.272634311000019, 51.31582265800013], [4.290782097000118, 51.305894273000135], [4.30298912900011, 51.29608795800003], [4.306651238000143, 51.289740302000084], [4.308116082000112, 51.283636786], [4.305430535000141, 51.276597398000106], [4.298675977000102, 51.269598700000031], [4.296722852000045, 51.267564195000105], [4.308360222000147, 51.271226304000052], [4.316416863000086, 51.276841539000159], [4.330821160000141, 51.29608795800003], [4.297129754000139, 51.305161851000108], [4.289317254000054, 51.309149481000176], [4.285411004000082, 51.318019924000126], [4.286143425000091, 51.339667059000121], [4.283050977000102, 51.350083726000108], [4.27564537900011, 51.358099677000055], [4.261078321000099, 51.369370835000055], [4.261067579111284, 51.369379275020279], [4.28112422200013, 51.368946510000015], [4.290104614000114, 51.368751933000098], [4.326278117000129, 51.356427104000048], [4.345605103000082, 51.352292990000123], [4.392217244000051, 51.350406799000112], [4.411234171000018, 51.35673716200013], [4.416195109000086, 51.373971253000107], [4.410097290000124, 51.383789775000182], [4.387669719000115, 51.40053293900003], [4.379918253000113, 51.409524638000065], [4.3806417240001, 51.419653219000125], [4.387152954000072, 51.427456360000136], [4.389220011000134, 51.434587708], [4.37712772600014, 51.442881775000117], [4.429424275000059, 51.461976217000128], [4.483064412000147, 51.474326884000092], [4.512623331000071, 51.47737579400011], [4.525232381000109, 51.475928854000117], [4.533190551000075, 51.467583110000064], [4.531846964000096, 51.450865784000101], [4.523372029000086, 51.438411764000122], [4.521511678000081, 51.428644918000074], [4.540631958000091, 51.420066630000136], [4.553861125000083, 51.419291484000112], [4.582696573000106, 51.422598776000129], [4.614632609000097, 51.417560323000046], [4.630135539000094, 51.418206279000131], [4.643571411000067, 51.421410217000087], [4.653906697000053, 51.426216126000028], [4.731214641000065, 51.485618185000064], [4.764184204000117, 51.496237691000132], [4.778653605000045, 51.495359192000095], [4.796843709000086, 51.491018372000113], [4.813586873000133, 51.484119569000043], [4.823922159000063, 51.47564463300013], [4.826092570000128, 51.460555115000133], [4.819891398000067, 51.446214905000048], [4.815447224000138, 51.431073711000025]]]] } } as GeoPermissibleObjects
    }
  },
  computed: {
    radars: function (): RadarInterface[] {
      // Flat array of radars based on the "sites" prop
      let r: RadarInterface[] = []
      this.sites.forEach(e => {
        r = r.concat(e.options)
      })

      return r;
    },
    projection: function (): d3.GeoProjection {
      return d3.geoMercator()
        .center([this.projectionCenter.lon, this.projectionCenter.lat])
        .scale(this.projectionScale)
        .translate([this.svgWidth / 2, this.svgHeight / 2])
    },

    pathGenerator: function (): d3.GeoPath {
      return d3.geoPath().projection(this.projection);
    },

    countryPath: function (): string | null {
      return this.pathGenerator(this.Countryfeature)
    }
  },
  methods: {
    projectRadar(radar: RadarInterface): [number, number] | null {
      return this.projection([radar.longitude, radar.latitude])
    },
    getCircleFillColor(radar: RadarInterface): string {
      return radar.value === this.selectedRadarCode ? "red" : "black"
    }
  },
});
</script>